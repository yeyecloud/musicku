/*! jquery-pjax v2.25.4 | (c) 2012, falsandtru | MIT Licence */
!new function(window,document,undefined,$){"use strict";var MODULE;!function(a){function b(){function a(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16).toUpperCase()}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a)}function c(a,b){if(!Object.freeze||a===a.window||"ownerDocument"in a)return a;if(!Object.isFrozen(a)&&Object.freeze(a),!b)return a;for(var d in a){var e=a[d];~"object,function".indexOf(typeof e)&&e&&c(e,b)}return a}function d(a,b){if(!Object.seal||a===a.window||"ownerDocument"in a)return a;if(!Object.isSealed(a)&&Object.seal(a),!b)return a;for(var c in a){var e=a[c];~"object,function".indexOf(typeof e)&&e&&d(e,b)}return a}a.NAME="pjax",a.NAMESPACE=jQuery,function(a){a[a.blank=-2]="blank",a[a.initiate=-1]="initiate",a[a.open=0]="open",a[a.pause=1]="pause",a[a.lock=2]="lock",a[a.seal=3]="seal",a[a.error=4]="error",a[a.crash=5]="crash",a[a.terminate=6]="terminate",a[a.close=7]="close"}(a.State||(a.State={}));a.State;a.GEN_UUID=b,a.FREEZE=c,a.SEAL=d}(MODULE||(MODULE={}));var MODULE;!function(a){!function(){}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(a){!function(){}(a.APP||(a.APP={}));a.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){var c=function(){function b(b){this.NAME=a.NAME,this.NAMESPACE=a.NAMESPACE,this.UUID=a.GEN_UUID(),this.state_=-2,this.state_=b}return b.prototype.MAIN=function(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];return this.main_.apply(this,[a].concat(b))},b.prototype.main_=function(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];return a},b}();b.Template=c}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){var c=function(){function b(b){this.UUID=a.GEN_UUID(),this.state_=-2,this.state_=b}return b}();b.Template=c}(a.VIEW||(a.VIEW={}));a.VIEW}(MODULE||(MODULE={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},MODULE;!function(a){!function(a){var b=function(a){function b(b,c,d,e){var f=this;a.call(this,-1),this.model_=b,this.controller_=c,this.context_=d,this.handlers={click:function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];f.controller_.click.apply(f.controller_,a)},submit:function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];f.controller_.submit.apply(f.controller_,a)},popstate:function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];f.controller_.popstate.apply(f.controller_,a)},scroll:function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];f.controller_.scroll.apply(f.controller_,a)}},this.observe_(e)}return __extends(b,a),b.prototype.observe_=function(a){return this.release_(a),this.context_.delegate(a.link,a.nss.click,this.handlers.click).delegate(a.form,a.nss.submit,this.handlers.submit),jQuery(window).bind(a.nss.popstate,this.handlers.popstate),a.database&&a.fix.scroll&&jQuery(window).bind(a.nss.scroll,this.handlers.scroll),this},b.prototype.release_=function(a){return this.context_.undelegate(a.link,a.nss.click).undelegate(a.form,a.nss.submit),jQuery(window).unbind(a.nss.popstate),a.database&&a.fix.scroll&&jQuery(window).unbind(a.nss.scroll),this},b}(a.Template);a.Main=b}(a.VIEW||(a.VIEW={}));a.VIEW}(MODULE||(MODULE={}));var MODULE;!function(a){a.View=a.VIEW.Main}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){var c,d,e,f=function(){function b(b,f){c=b,d=f,e=this,a.SEAL(this)}return b.prototype.enable=function(){return c.enable(),this},b.prototype.disable=function(){return c.disable(),this},b.prototype.click=function(a,b){var e,f=c.getGlobalSetting();switch(typeof a){case"undefined":e=jQuery(this).filter("a").first().clone();break;case"object":e=jQuery(a).clone();break;case"string":b=jQuery.extend(!0,{},b,{href:a}),e=jQuery("<a/>",b);break;default:return this}return e.first().one(f.nss.click,function(){return d.click.apply(d,arguments)}).click(),this},b.prototype.submit=function(a,b,e){var f,g,h,i=c.getGlobalSetting(),j=document.createDocumentFragment();switch(typeof a){case"undefined":f=jQuery(this).filter("form").first().clone();break;case"object":f=jQuery(a).clone();break;case"string":b=jQuery.extend(!0,{},b,{action:a}),g=e instanceof Array&&Array||e instanceof Object&&Object||undefined;for(var k in e){switch(g){case Object:if(!Object.prototype.hasOwnProperty.call(e,k))continue;h=jQuery("<textarea/>",{name:k}).val(e[k]);break;case Array:e[k].attrs=e[k].attrs||{},e[k].attrs.name=e[k].name||e[k].attrs.name,e[k].attrs.type=e[k].type||e[k].attrs.type,h=jQuery("<"+e[k].tag+"/>",e[k].attrs).val(e[k].value);break;default:continue}j.appendChild(h[0])}f=jQuery("<form/>",b).append(j);break;default:return this}return f.first().one(i.nss.submit,function(){return d.submit.apply(d,arguments)}).submit(),this},b.prototype.getCache=function(a){"undefined"==typeof a&&(a=window.location.href);var b=c.getCache(a);return b&&(b={data:b.data,textStatus:b.textStatus,jqXHR:b.jqXHR,expires:b.expires}),b},b.prototype.setCache=function(a,b,d,e){switch("undefined"==typeof a&&(a=window.location.href),arguments.length){case 0:return this.setCache(a,document.documentElement.outerHTML);case 1:return this.setCache(a,null);case 2:case 3:case 4:default:c.setCache(a,b,d,e)}return this},b.prototype.removeCache=function(a){return"undefined"==typeof a&&(a=window.location.href),c.removeCache(a),this},b.prototype.clearCache=function(){return c.clearCache(),this},b.prototype.follow=function(b,d,e,f){if(!c.isDeferrable)return!1;var g=b.currentTarget;return d.follow=!0,d.host=e||"",isFinite(b.timeStamp)&&(d.timeStamp=f||b.timeStamp),c.setGlobalXHR(d),jQuery.when(d).done(function(){!c.getCache(g.href)&&c.isImmediateLoadable(b)&&c.setCache(g.href,undefined,undefined,d)}),jQuery[a.NAME].click(g.href),!0},b.prototype.host=function(){return c.host()},b}();b.Functions=f}(a.CONTROLLER||(a.CONTROLLER={}));a.CONTROLLER}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){var c,d,e,f=function(){function b(b,f){c=b,d=f,e=this,a.SEAL(this)}return b}();b.Methods=f}(a.CONTROLLER||(a.CONTROLLER={}));a.CONTROLLER}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){var c=function(){function c(c,d){this.UUID=a.GEN_UUID(),this.state_=-2,this.PROPERTIES=[],this.state_=d,this.FUNCTIONS=new b.Functions(c,this),this.METHODS=new b.Methods(c,this),this.REGISTER(c)}return c.prototype.EXTEND=function(b){return b instanceof a.NAMESPACE?(b instanceof jQuery&&(b=b.add()),this.REGISTER_FUNCTION(b),this.REGISTER_METHOD(b)):(b!==this.EXTENSION&&(b=this.EXTENSION),this.REGISTER_FUNCTION(b)),this.UPDATE_PROPERTIES(b),b},c.prototype.REGISTER=function(b){var c=this;this.EXTENSION=this.EXTENSION||function(){for(var a=[],d=0;d<arguments.length-0;d++)a[d]=arguments[d+0];var e=c.EXTEND(this);return a=[e].concat(a),a=c.EXEC.apply(c,a),a instanceof Array?b.MAIN.apply(b,a):a},this.EXTEND(this.EXTENSION),window[a.NAMESPACE]=window[a.NAMESPACE]||{},a.NAMESPACE[a.NAME]=a.NAMESPACE.prototype?a.NAMESPACE.prototype[a.NAME]=this.EXTENSION:this.EXTENSION},c.prototype.EXEC=function(){return this.exec_.apply(this,arguments)},c.prototype.exec_=function(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];return[a].concat(b)},c.prototype.REGISTER_FUNCTION=function(a){var b=this.FUNCTIONS;for(var c in b)"constructor"!==c&&(a[c]=b[c]);return a},c.prototype.REGISTER_METHOD=function(a){var b=this.METHODS;for(var c in b)"constructor"!==c&&(a[c]=b[c]);return a},c.prototype.UPDATE_PROPERTIES=function(a){var b,c,d,e=this.PROPERTIES;for(b=0,c=e.length;c>b;b++)"constructor"!==b&&(d=e[b],a[d]&&(a[d]=a[d]()));return a},c}();b.Template=c}(a.CONTROLLER||(a.CONTROLLER={}));a.CONTROLLER}(MODULE||(MODULE={}));var MODULE;!function(a){!function(a){var b=function(a){function b(b){a.call(this,b,-1),this.model_=b}return __extends(b,a),b.prototype.exec_=function(a){var b=[].slice.call(arguments,1,2),c=b[0];switch(typeof c){case"undefined":case"object":break;default:return a}return[a].concat(b)},b.prototype.click=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this.model_.click.apply(this.model_,a)},b.prototype.submit=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this.model_.submit.apply(this.model_,a)},b.prototype.popstate=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this.model_.popstate.apply(this.model_,a)},b.prototype.scroll=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this.model_.scroll.apply(this.model_,a)},b}(a.Template);a.Main=b}(a.CONTROLLER||(a.CONTROLLER={}));a.CONTROLLER}(MODULE||(MODULE={}));var MODULE;!function(a){a.Controller=a.CONTROLLER.Main}(MODULE||(MODULE={}));var MODULE;!function(a){!function(a){!function(a){!function(a){var b=function(){function a(a){this.DB=a,this.autoIncrement=!0,this.indexes=[],this.buffer_=[]}return a.prototype.accessStore=function(a,b){var c=this;"undefined"==typeof b&&(b="readwrite"),this.DB.conExtend();try{var d=this.DB.database(),e=d&&d.transaction(this.name,b).objectStore(this.name)}catch(f){}e?a(e):this.DB.opendb(function(){return c.accessStore(a)})},a.prototype.accessRecord=function(a,b,c){"undefined"==typeof c&&(c="readwrite"),this.accessStore(function(c){c.get(a).onsuccess=b},c)},a.prototype.loadBuffer=function(a){var b=this;"undefined"==typeof a&&(a=0);var c=this.buffer_;this.accessStore(function(d){d.indexNames.length&&(d.index(d.indexNames[0]).openCursor(b.DB.IDBKeyRange.lowerBound(0),"prev").onsuccess=function(){if(this.result){var b=this.result,e=b.value,f=e[d.keyPath];c[f]=e,--a&&b["continue"]&&b["continue"]()}})})},a.prototype.saveBuffer=function(){var a=this.buffer_;this.accessStore(function(b){for(var c in a)b.put(a[c])})},a.prototype.getBuffers=function(){return this.buffer_},a.prototype.getBuffer=function(a){return this.buffer_[a]},a.prototype.setBuffers=function(a,b){for(var c in a)this.setBuffer(a[c],b);return this.buffer_},a.prototype.setBuffer=function(a,b){var c=a[this.keyPath];return this.buffer_[c]=b?jQuery.extend(!0,{},this.buffer_[c],a):a,this.buffer_[c]},a.prototype.addBuffer=function(a){return a[this.keyPath]=this.buffer_.length||1,this.buffer_.push(a),a},a.prototype.removeBuffer=function(a){var b=this.buffer_[a];return"number"==typeof a?this.buffer_.splice(a,1):delete this.buffer_[a],b},a.prototype.clearBuffer=function(){this.buffer_=[]},a.prototype.get=function(a,b){this.accessRecord(a,b)},a.prototype.set=function(a,b){if(!b)return this.put(a);a=jQuery.extend(!0,{},a);var c=a[this.keyPath];this.accessRecord(c,function(){this.source.put(jQuery.extend(!0,{},this.result,a))})},a.prototype.add=function(a){a=jQuery.extend(!0,{},a);a[this.keyPath];this.autoIncrement&&delete a[this.keyPath],this.accessStore(function(b){b.add(a)})},a.prototype.put=function(a){a=jQuery.extend(!0,{},a);a[this.keyPath];this.accessStore(function(b){b.put(a)})},a.prototype.remove=function(a){this.accessStore(function(b){b["delete"](a)})},a}();a.Store=b}(a.DATA||(a.DATA={}));a.DATA}(a.APP||(a.APP={}));a.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(a){!function(a){!function(a){var b=function(a){function b(){a.apply(this,arguments),this.name="meta",this.keyPath="key",this.autoIncrement=!1,this.indexes=[{name:this.keyPath,keyPath:this.keyPath,option:{unique:!0}}]}return __extends(b,a),b}(a.Store);a.MetaStore=b}(a.DATA||(a.DATA={}));a.DATA}(a.APP||(a.APP={}));a.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(a){!function(a){!function(a){var b=function(a){function b(){a.apply(this,arguments),this.name="history",this.keyPath="url",this.autoIncrement=!1,this.indexes=[{name:"date",keyPath:"date",option:{unique:!1}}]}return __extends(b,a),b.prototype.clean=function(){var a=this;this.accessStore(function(b){b.count().onsuccess=function(){this.result<=1e3||(b.index("date").openCursor(a.DB.IDBKeyRange.upperBound((new Date).getTime()-2592e5)).onsuccess=function(){if(this.result){var a=this.result;a?(a["delete"](a.value[b.keyPath]),a["continue"]&&a["continue"]()):b.count().onsuccess=function(){1e3<this.result&&b.clear()}}})}})},b}(a.Store);a.HistoryStore=b}(a.DATA||(a.DATA={}));a.DATA}(a.APP||(a.APP={}));a.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(a){!function(a){!function(a){var b=function(a){function b(){a.apply(this,arguments),this.name="server",this.keyPath="host",this.autoIncrement=!1,this.indexes=[{name:"date",keyPath:"date",option:{unique:!1}}]}return __extends(b,a),b.prototype.clean=function(){var a=this;this.accessStore(function(b){var c=50;b.count().onsuccess=function(){this.result<=c+10||(c=this.result-c,b.index("date").openCursor(a.DB.IDBKeyRange.lowerBound(0),"prev").onsuccess=function(){if(this.result){var a=this.result;a&&(0>--c&&a["delete"](a.value[b.keyPath]),a["continue"]&&a["continue"]())}})}})},b}(a.Store);a.ServerStore=b}(a.DATA||(a.DATA={}));a.DATA}(a.APP||(a.APP={}));a.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){!function(b){!function(b){var c=function(){function c(){var c=this;this.IDBFactory=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.mozIDBKeyRange||window.msIDBKeyRange,this.name_=a.NAME,this.version_=7,this.refresh_=10,this.upgrade_=0,this.state_=-2,this.database=function(){return c.database_},this.state=function(){return c.state_},this.conAge_=1e4,this.conExpires_=0,this.conInterval_=1e3,this.tasks_=[],this.stores={meta:new b.MetaStore(this),history:new b.HistoryStore(this),server:new b.ServerStore(this)},this.meta={version:{key:"version",value:undefined},update:{key:"update",value:undefined}};var d=function(){var a=(new Date).getTime(),b=c.conExpires_;b&&a>b&&(c.closedb(),c.conExpires_=0),setTimeout(d,Math.max(c.conExpires_-a+100,c.conInterval_)),c.tasks_.length&&-1!==c.state()&&c.opendb(null,!0)};this.conAge_&&setTimeout(d,this.conInterval_)}return c.prototype.opendb=function(a,b){if(this.IDBFactory){var c=this;if(c.conExtend(),-2===c.state()&&(a="function"==typeof a?a:function(){return undefined}),"function"==typeof a&&c.reserveTask_(a),c.tasks_.length&&-1!==c.state())try{c.state_=-1;var d=c.IDBFactory.open(c.name_,c.upgrade_?c.version_:1);d.onblocked=function(){c.closedb(1);try{this.result.close(),!b&&setTimeout(function(){return c.opendb(null,!0)},1e3)}catch(a){!b&&c.initdb_(1e3)}},d.onupgradeneeded=function(){try{var a=this.result;c.createStore_(a)}catch(d){!b&&c.initdb_(1e3)}},d.onsuccess=function(){try{var a=this.result;c.database_=a,c.checkdb_(a,c.version_,function(){c.database_=a,c.state_=0,c.conExtend(),c.digestTask_()},function(){!b&&c.initdb_()}),c.database_=null}catch(d){!b&&c.initdb_(1e3)}},d.onerror=function(){c.closedb(4);try{this.result.close(),!b&&setTimeout(function(){return c.opendb(null,!0)},1e3)}catch(a){!b&&c.initdb_(1e3)}}}catch(e){c.closedb(4),!b&&c.initdb_(1e3)}}},c.prototype.closedb=function(a){"undefined"==typeof a&&(a=7),this.database()&&this.database().close&&this.database().close(),this.database_=null,this.state_=a},c.prototype.conExtend=function(){this.conExpires_=(new Date).getTime()+this.conAge_},c.prototype.initdb_=function(a){var b=this,c=function(){b.deletedb_(function(){return b.opendb(null,!0)})};a?void setTimeout(c,a):c()},c.prototype.deletedb_=function(a,b){this.closedb();var c=this.IDBFactory,d=c&&c.deleteDatabase&&c.deleteDatabase(this.name_);d&&(d.onsuccess=a,d.onerror=b)},c.prototype.checkdb_=function(a,b,c,d){var e=this,f=this.meta,g=this.stores.meta;if(a.objectStoreNames.length!==Object.keys(this.stores).length)return void d();for(var h in this.stores){var i=a.transaction(this.stores[h].name,"readonly").objectStore(this.stores[h].name);switch(!1){case i.keyPath===e.stores[h].keyPath:case i.indexNames.length===e.stores[h].indexes.length:d()}}g.get(f.version.key,function(){var a=this.result;!a||e.upgrade_?g.set(g.setBuffer({key:f.version.key,value:b})):a.value<b?d():a.value>b&&e.closedb(4)}),g.get(f.update.key,function(){var a=this.result,b=Math.floor((new Date).getTime()/864e5);if(a&&e.refresh_){if(a.value<=b)return void d()}else g.set(g.setBuffer({key:f.update.key,value:b+e.refresh_}));c()})},c.prototype.createStore_=function(a){for(var b=a.objectStoreNames?a.objectStoreNames.length:0;b--;)a.deleteObjectStore(a.objectStoreNames[b]);for(var b in this.stores)for(var c,d=this.stores[b],e=a.createObjectStore(d.name,{keyPath:d.keyPath,autoIncrement:d.autoIncrement}),f=0,g=d.indexes;c=g[f];f++)e.createIndex(c.name,c.keyPath,c.option)},c.prototype.reserveTask_=function(a){this.tasks_.length>200&&this.tasks_.splice(100,100),(4!==this.state()||this.tasks_.length<100)&&this.tasks_.push(a)},c.prototype.digestTask_=function(){for(var a;a=this.tasks_.pop();)a()},c}();b.DB=c}(b.DATA||(b.DATA={}));b.DATA}(b.APP||(b.APP={}));b.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(a){!function(a){!function(a){var b=function(){function a(a){this.age_=a}return a.prototype.getCookie=function(a){if(a&&window.navigator.cookieEnabled){var b=new RegExp("(?:^|; )("+encodeURIComponent(a)+"=[^;]*)"),c=(document.cookie.match(b)||[]).pop();return c&&decodeURIComponent(c.split("=").pop())}},a.prototype.setCookie=function(a,b,c){return"undefined"==typeof c&&(c={}),a&&window.navigator.cookieEnabled?(c.age=c.age||this.age_,document.cookie=[encodeURIComponent(a)+"="+encodeURIComponent(b),c.age?"; expires="+new Date((new Date).getTime()+1e3*c.age).toUTCString():"",c.path?"; path="+c.path:"; path=/",c.secure?"; secure":""].join(""),this.getCookie(a)):void 0},a}();a.Cookie=b}(a.DATA||(a.DATA={}));a.DATA}(a.APP||(a.APP={}));a.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(a){!function(a){!function(a){var b=function(){function b(){this.DB=new a.DB,this.Cookie=new a.Cookie(864e3)}return b}();a.Main=b}(a.DATA||(a.DATA={}));a.DATA}(a.APP||(a.APP={}));a.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(a){var b=function(){function a(){}return a.trim=function(a){if(a="string"==typeof a?a:String(0===a&&a.toString()||""),a.trim)a=a.trim();else if(a=a.replace(/^[\s\uFEFF\xA0]+/,"")){var b=/[\s\uFEFF\xA0]/,c=a.length,d=c%8;a:{for(;d--;)if(!b.test(a.charAt(--c)))break a;for(;c;){if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a}}a=a.substring(0,c+1)}return a},a.repeat=function(a,b){switch(a instanceof Array&&"array"||typeof a){case"string":var c=a;return Array(b+1).join(c);case"array":var d=a.length;if(300>b){var e=Array(b);this.duff(-b,function(b){return e[b]=a[b%d]})}else{for(var e=a.slice();2*e.length<=b;)e=e.concat(e);e=e.concat(e.slice(0,b-e.length))}return e}},a.fire=function(a,b,c,d){return"undefined"==typeof b&&(b=window),"undefined"==typeof c&&(c=[]),"function"==typeof a?d?setTimeout(function(){a.apply(b||window,c)},0):a.apply(b||window,c):a},a.duff=function(a,b){if(0>a){for(var c=-a,d=c%8;d--;)b(--c);for(;c;)b(--c),b(--c),b(--c),b(--c),b(--c),b(--c),b(--c),b(--c)}else{for(var e=a,c=0,d=e%8,f=e/8^0;d--;)b(c++);for(;f--;)b(c++),b(c++),b(c++),b(c++),b(c++),b(c++),b(c++),b(c++)}},a.duffEx=function(a,b){if(0>a){var c=-a,d=c%8;a:{for(;d--;)if(!1===b(--c))break a;for(;c;){if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a}}}else{var e=a,c=0,d=e%8,f=e/8^0;a:{for(;d--;)if(!1===b(c++))break a;for(;f--;){if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a}}}},a.normalizeUrl=function(a,b){"undefined"==typeof b&&(b=!0);var c;return c=this.trim(a),c=/^([^:/?#]+):\/\/[^/?#.]+\.[^/?#]+/i.test(c)?c:function(a,b){return b.href=a,b.href}(c,document.createElement("a")),c=encodeURI(decodeURI(c)),c=c.replace(/["`^|\\<>{}\[\]\s].*/,""),c=b?this.justifyPercentEncodingUrlCase_(a,c):c},a.canonicalizeUrl=function(a){function b(a){return a.toUpperCase()}var c=this.normalizeUrl(a,!1);return c=c.replace(/(?:%\w{2})+/g,b)},a.compareUrl=function(a,b,c){return c&&(a=this.canonicalizeUrl(a),b=this.canonicalizeUrl(b)),a===this.justifyPercentEncodingUrlCase_(a,b)},a.justifyPercentEncodingUrlCase_=function(a,b){function c(b){var c=~a.indexOf(b.toUpperCase())||~a.indexOf(b.toLowerCase());return c?a.substr(~c,b.length):b}return a===b?b:b.replace(/(?:%\w{2})+/g,c)},a}();a.Utility=b}(a.LIBRARY||(a.LIBRARY={}));a.LIBRARY}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){!function(b){var c=a.LIBRARY.Utility,d=function(){function a(a,c){this.model_=a,this.app_=c,this.data_=new b.DATA.Main,this.stores_=this.data_.DB.stores}return a.prototype.getCookie=function(a){return this.data_.Cookie.getCookie(a)},a.prototype.setCookie=function(a,b,c){return this.data_.Cookie.setCookie(a,b,c)},a.prototype.opendb=function(a){a.database&&(this.data_.DB.opendb(),this.saveTitle(),this.saveScrollPosition())},a.prototype.loadBuffers=function(a){"undefined"==typeof a&&(a=0);for(var b in this.stores_)this.stores_[b].loadBuffer(a)},a.prototype.saveBuffers=function(){for(var a in this.stores_)this.stores_[a].saveBuffer()},a.prototype.getHistoryBuffer=function(a){return this.stores_.history.getBuffer(this.model_.convertUrlToKeyUrl(c.normalizeUrl(a)))},a.prototype.loadTitle=function(){var a=this.model_.convertUrlToKeyUrl(c.normalizeUrl(window.location.href)),b=this,d=this.stores_.history.getBuffer(a);d&&"string"==typeof d.title?document.title=d.title:this.stores_.history.get(a,function(){d=this.result,d&&d.title&&c.compareUrl(a,b.model_.convertUrlToKeyUrl(c.normalizeUrl(window.location.href)))&&(document.title=d.title)})},a.prototype.saveTitle=function(a,b){"undefined"==typeof a&&(a=window.location.href),"undefined"==typeof b&&(b=document.title);var d=this.model_.convertUrlToKeyUrl(c.normalizeUrl(a)),e={url:d,title:b,date:(new Date).getTime(),scrollX:undefined,scrollY:undefined,host:undefined,expires:undefined};this.stores_.history.setBuffer(e,!0),this.stores_.history.set(e,!0),this.stores_.history.clean()},a.prototype.loadScrollPosition=function(){function a(a,b){"number"==typeof a&&"number"==typeof b&&window.scrollTo(parseInt(Number(a)+"",10),parseInt(Number(b)+"",10))}var b=this.model_.convertUrlToKeyUrl(c.normalizeUrl(window.location.href)),d=this,e=this.stores_.history.getBuffer(b);e&&"number"==typeof e.scrollX?a(e.scrollX,e.scrollY):this.stores_.history.get(b,function(){e=this.result,e&&"number"==typeof e.scrollX&&c.compareUrl(b,d.model_.convertUrlToKeyUrl(c.normalizeUrl(window.location.href)))&&a(e.scrollX,e.scrollY)})},a.prototype.saveScrollPosition=function(a,b,d){"undefined"==typeof a&&(a=window.location.href),"undefined"==typeof b&&(b=jQuery(window).scrollLeft()),"undefined"==typeof d&&(d=jQuery(window).scrollTop());var e=this.model_.convertUrlToKeyUrl(c.normalizeUrl(a)),f={url:e,scrollX:b,scrollY:d,date:(new Date).getTime(),title:undefined,host:undefined,expires:undefined};this.stores_.history.setBuffer(f,!0),this.stores_.history.set(f,!0)},a.prototype.loadExpires=function(){},a.prototype.saveExpires=function(a,b,d){var e=this.model_.convertUrlToKeyUrl(c.normalizeUrl(a)),f={url:e,host:b,expires:d,title:undefined,scrollX:undefined,scrollY:undefined,date:undefined};this.stores_.history.setBuffer(f,!0),this.stores_.history.set(f,!0)},a.prototype.getServerBuffers=function(){return this.stores_.server.getBuffers()},a.prototype.loadServer=function(){},a.prototype.saveServer=function(a,b,c,d,e){"undefined"==typeof c&&(c=0),"undefined"==typeof e&&(e=0);var f=this.stores_.server,g={host:a.split("//").pop().split("/").shift()||"",performance:b,state:c,date:(new Date).getTime()};f.setBuffer(g,!0),f.get(a,function(){var b=this.result;b&&c?b.state&&f["delete"](a):f.set(g)}),this.stores_.server.clean()},a}();b.Data=d}(b.APP||(b.APP={}));b.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){!function(b){var c=a.LIBRARY.Utility,d=function(){function a(a,b){var c=this;this.model_=a,this.app_=b,this.host_="",this.host=function(){return c.host_},this.parallel_=6,this.queue_=[]}return a.prototype.isBalanceable_=function(a){return a.balance.self&&!!Number(this.app_.data.getCookie(a.balance.client.cookie.balance))},a.prototype.enable=function(a){return this.isBalanceable_(a)?!a.balance.client.support.userAgent.test(window.navigator.userAgent)||a.balance.client.exclude.test(window.navigator.userAgent)?void this.disable(a):this.app_.data.setCookie(a.balance.client.cookie.balance,"1")?void(a.balance.client.support.redirect.test(window.navigator.userAgent)&&this.app_.data.setCookie(a.balance.client.cookie.redirect,"1")):void this.disable(a):void this.disable(a)},a.prototype.disable=function(a){this.app_.data.getCookie(a.balance.client.cookie.balance)&&this.app_.data.setCookie(a.balance.client.cookie.balance,"0"),this.app_.data.getCookie(a.balance.client.cookie.redirect)&&this.app_.data.setCookie(a.balance.client.cookie.redirect,"0"),this.changeServer(null,a)},a.prototype.changeServer=function(a,b){"undefined"==typeof b&&(b=this.model_.getGlobalSetting()),this.isBalanceable_(b)&&(a=a||"",this.host_=a,this.app_.data.setCookie(b.balance.client.cookie.host,a))},a.prototype.chooseServers_=function(a,b,c,d){var e,f=this.app_.data.getServerBuffers(),g={};!function(){var b=(new Date).getTime();for(var c in f)b>f[c].date+a||(g[f[c].performance]=f[c])}(),e=[];for(var h,i=Object.keys(g).sort(),j=0;h=e.length<b&&i[j];j++){var k=g[h],l=k.host,m=k.state;m&&m+d>=(new Date).getTime()||(l||!c||Math.floor(Math.random())*c)&&e.push(l)}return e},a.prototype.chooseServer=function(a){if(this.isBalanceable_(a)){var b=this.app_.data.getHistoryBuffer(a.destLocation.href),c=b&&b.expires||0;if(c&&c>=(new Date).getTime())return void this.changeServer(b.host,a);if(!this.app_.data.getServerBuffers().length&&!this.app_.data.getCookie(a.balance.client.cookie.host))return void this.changeServer("",a);var d=this.chooseServers_(a.balance.history.expires,1,a.balance.weight,a.balance.server.respite);return d.length?void this.changeServer(d.shift(),a):void this.disable(a)}},a.prototype.bypass=function(a,b){var d=this;if(this.isBalanceable_(a)){this.queue_=this.queue_.length?this.queue_:this.chooseServers_(a.balance.history.expires,a.balance.history.limit,a.balance.weight,a.balance.server.respite).slice(0,b+1);for(var e=this.queue_,f=jQuery.extend({},a.ajax,a.balance.option.ajax,a.balance.option.callbacks.ajax);e.length&&this.host();){if(!this.parallel_)return void(e.length&&setTimeout(function(){return d.bypass(a,e.length-1)},f.timeout||1500));!function(b){--d.parallel_,f.url=c.normalizeUrl(b+window.location.pathname.replace(/^\/?/,"/")+window.location.search);var g=function(){d.host_=b,d.queue_=[]},h=function(){++d.parallel_,e.length&&d.bypass(a,e.length-1)};d.model_.isDeferrable?jQuery.ajax(f).done(g).always(h):(f.success=g,f.complete=h,jQuery.ajax(f))}(e.shift())}}},a}();b.Balance=d}(b.APP||(b.APP={}));b.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){!function(b){var c,d=(a.LIBRARY.Utility,function(){function a(){}return a.prototype.createHTMLDocument=function(a,b){function d(a,b){var c=document.createElement("div");c.innerHTML=b.match(/<html(?:\s.*?[^\\])?>|$/i).shift().replace(/html/i,"div")||"<div>";for(var d,e=c.firstChild.attributes,f=0;d=e[f];f++)a.documentElement.setAttribute(d.name,d.value);var c=document.createElement("html");for(c.innerHTML=b.replace(/^.*?<html(?:\s.*?[^\\])?>/im,""),a.documentElement.removeChild(a.head),a.documentElement.removeChild(a.body);c.childNodes.length;)a.documentElement.appendChild(c.childNodes[0]);return a}var e=this;a=a||"<title></title>";var f=function(a){try{c=a;var d='<html lang="en" class="html"><head><title>&amp;</title><link href="/"><noscript><style>/**/</style></noscript></head><body><noscript>noscript</noscript><a href="/"></a></body></html>',f=e.createHTMLDocument(d,"");switch(!1){case!!f:case f.URL&&decodeURI(f.URL)===decodeURI(b||window.location.href):case"&"===f.title:case!!f.querySelector('html.html[lang="en"]'):case!!f.querySelector("head>link").href:case!!f.querySelector("head>noscript").innerHTML:case!!f.querySelector("body>noscript").innerHTML:case!!f.querySelector("body>a").href:throw!0}return!0}catch(g){return c=null,!1}},g=window.location.href;b&&window.history.replaceState(window.history.state,document.title,b);var h;switch(c){case"dom":"function"==typeof window.DOMParser&&(h=(new window.DOMParser).parseFromString(a,"text/html"));break;case"doc":if(document.implementation&&document.implementation.createHTMLDocument){if(h=document.implementation.createHTMLDocument(""),"object"!=typeof h.activeElement||!h.activeElement)break;"function"==typeof window.DOMParser&&(new window.DOMParser).parseFromString("","text/html")&&(h.title=(new window.DOMParser).parseFromString(a.match(/<title(?:\s.*?[^\\])?>(?:.*?[^\\])?<\/title>/i),"text/html").title),h.open(),h.write(a),h.close(),h.title!==h.querySelector("title").textContent&&(h.title=h.querySelector("title").textContent)}break;case"manipulate":document.implementation&&document.implementation.createHTMLDocument&&(h=d(document.implementation.createHTMLDocument(""),a));break;case null:h=null;break;default:switch(/webkit|firefox|trident|$/i.exec(window.navigator.userAgent.toLowerCase()).shift()){case"webkit":f("doc")||f("dom")||f("manipulate");break;case"firefox":f("dom")||f("doc")||f("manipulate");break;case"trident":f("manipulate")||f("dom")||f("doc");break;default:f("dom")||f("doc")||f("manipulate")}h=this.createHTMLDocument(a,b)}return b&&window.history.replaceState(window.history.state,document.title,g),h},a.prototype.chooseArea=function(a,b,c){a=a instanceof Array?a:[a];var d,e=-1;a:for(;d=a[++e];){for(var f=d.match(/(?:[^,\(\[]+|\(.*?\)|\[.*?\])+/g),g=-1;f[++g];)if(!jQuery(f[g],b).length||!jQuery(f[g],c).length)continue a;return d}},a.prototype.movePageNormally=function(a){switch(a.type.toLowerCase()){case"click":window.location.assign(a.currentTarget.href);break;case"submit":switch(a.currentTarget.method.toUpperCase()){case"GET":window.location.assign(a.currentTarget.action.replace(/[?#].*/,"")+"?"+jQuery(a.currentTarget).serialize());break;case"POST":window.location.assign(a.currentTarget.action)}break;case"popstate":window.location.reload()}},a.prototype.calAge=function(a){switch(!0){case/no-store|no-cache/.test(a.getResponseHeader("Cache-Control")):return 0;case!!~String(a.getResponseHeader("Cache-Control")).indexOf("max-age="):return 1e3*Number(a.getResponseHeader("Cache-Control").match(/max-age=(\d+)/).pop());case!!String(a.getResponseHeader("Expires")):return new Date(a.getResponseHeader("Expires")).getTime()-(new Date).getTime();default:return 0}},a.prototype.calExpires=function(a){return(new Date).getTime()+this.calAge(a)},a.prototype.dispatchEvent_=function(a,b,c,d){var e=document.createEvent("HTMLEvents");e.initEvent(b,c,d),a.dispatchEvent(e)},a.prototype.wait_=function(a){var b=jQuery.Deferred();return a?(setTimeout(function(){b.resolve()},a),b):b.resolve()},a}());b.PageUtility=d}(b.APP||(b.APP={}));b.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){!function(b){var c=a.LIBRARY.Utility,d=function(a){function b(b,c,d,e,f,g,h,i){a.call(this),this.model_=b,this.app_=c,this.setting_=d,this.event_=e,this.register_=f,this.cache_=g,this.done_=h,this.fail_=i,this.main_()}return __extends(b,a),b.prototype.main_=function(){function a(a){h.data_=a[0],h.textStatus_=a[1],h.jqXHR_=a[2],c.fire(i.callbacks.ajax.done,this,[j,i.param].concat(a))}function b(a,b,d){h.jqXHR_=a,h.textStatus_=b,h.errorThrown_=d,c.fire(i.callbacks.ajax.fail,this,[j,i.param].concat(arguments))
}function d(){c.fire(i.callbacks.ajax.always,this,[j,i.param].concat(arguments)),h.model_.setGlobalXHR(null),h.model_.isDeferrable&&(h.data_?h.done_(i,j,k,h.cache_,h.data_,h.textStatus_,h.jqXHR_,h.errorThrown_,h.host_):h.fail_(i,j,k,h.cache_,h.data_,h.textStatus_,h.jqXHR_,h.errorThrown_,h.host_))}function e(a,b,d){h.data_=a,h.textStatus_=b,h.jqXHR_=d,c.fire(i.callbacks.ajax.success,this,[j,i.param,a,b,d])}function f(a,b,d){h.jqXHR_=a,h.textStatus_=b,h.errorThrown_=d,c.fire(i.callbacks.ajax.error,this,[j,i.param,a,b,d])}function g(a,b){c.fire(i.callbacks.ajax.complete,this,[j,i.param,a,b]),h.model_.setGlobalXHR(null),h.model_.isDeferrable||(h.data_?h.done_(i,j,k,h.cache_,h.data_,h.textStatus_,h.jqXHR_,h.errorThrown_,h.host_):h.fail_(i,j,k,h.cache_,h.data_,h.textStatus_,h.jqXHR_,h.errorThrown_,h.host_))}var h=this,i=this.setting_,j=this.event_=jQuery.extend(!0,{},this.event_),k=this.register_,l=this.cache_,m=this.model_.getGlobalXHR(),n=c.fire(i.wait,null,[j,i.param,i.origLocation.href,i.destLocation.href]),o=i.speedcheck,p=this.model_.speed;if(o&&(p.fire=j.timeStamp),o&&p.time.splice(0,100,0),o&&p.name.splice(0,100,"pjax("+p.time.slice(-1)+")"),this.app_.page.isScrollPosSavable=!1,i.fix.reset&&/click|submit/.test(j.type.toLowerCase())&&window.scrollTo(jQuery(window).scrollLeft(),0),this.dispatchEvent_(document,i.gns+":fetch",!1,!0),l&&l.jqXHR)if(o&&p.name.splice(0,1,"cache("+p.time.slice(-1)+")"),i.loadtime=0,this.model_.setGlobalXHR(null),this.host_=l.host||"",this.data_=l.jqXHR.responseText,this.textStatus_=l.textStatus,this.jqXHR_=l.jqXHR,this.model_.isDeferrable)jQuery.when(jQuery.Deferred().resolve([h.data_,h.textStatus_,h.jqXHR_]),this.wait_(n)).done(a).fail(b).always(d);else{var q=jQuery.extend({},jQuery.ajaxSettings,i.ajax);q=q.context||q,e.call(q,h.data_,h.textStatus_,h.jqXHR_),g.call(q,h.jqXHR_,h.textStatus_)}else if(m&&m.follow&&"abort"!==m.statusText&&"error"!==m.statusText){o&&p.time.splice(0,1,m.timeStamp-p.fire),o&&p.name.splice(0,1,"preload("+p.time.slice(-1)+")"),o&&p.time.push(p.now()-p.fire),o&&p.name.push("continue("+p.time.slice(-1)+")"),this.host_=m.host||"",i.loadtime=m.timeStamp;var n=i.wait&&isFinite(m.timeStamp)?Math.max(n-(new Date).getTime()+m.timeStamp,0):0;jQuery.when(m,h.wait_(n)).done(a).fail(b).always(d)}else{i.loadtime=j.timeStamp;var r=i.destLocation.cloneNode(),s={},t={};switch(this.app_.balance.chooseServer(i),this.host_=i.balance.self&&this.app_.balance.host().split("//").pop()||"",r.host=this.host_||i.destLocation.host,s.url=i.server.query?[r.protocol,"//",r.host,r.pathname.replace(/^\/?/,"/"),r.search.replace(/&*$/,"&"+i.server.query).replace(/^\??&/,"?").replace(/(\?|&)$/,""),r.hash].join(""):r.href,j.type.toLowerCase()){case"click":s.type="GET";break;case"submit":switch(s.type=j.currentTarget.method.toUpperCase(),s.type){case"POST":jQuery(j.currentTarget).has(":file").length?"function"==typeof FormData&&(s.data=new FormData(j.currentTarget),s.contentType=!1,s.processData=!1):s.data=jQuery(j.currentTarget).serializeArray();break;case"GET":}break;case"popstate":s.type="GET"}t={xhr:i.callbacks.ajax.xhr?function(){var a;return a=c.fire(i.callbacks.ajax.xhr,this,[j,i.param]),a="object"==typeof a&&a||jQuery.ajaxSettings.xhr()}:undefined,beforeSend:i.callbacks.ajax.beforeSend||i.server.header?function(a,b){i.server.header&&a.setRequestHeader(i.nss.requestHeader,"true"),"object"==typeof i.server.header&&(a.setRequestHeader(i.nss.requestHeader,"true"),i.server.header.area&&a.setRequestHeader(i.nss.requestHeader+"-Area",this.app_.chooseArea(i.area,document,document)),i.server.header.head&&a.setRequestHeader(i.nss.requestHeader+"-Head",i.load.head),i.server.header.css&&a.setRequestHeader(i.nss.requestHeader+"-CSS",i.load.css.toString()),i.server.header.script&&a.setRequestHeader(i.nss.requestHeader+"-Script",i.load.script.toString())),c.fire(i.callbacks.ajax.beforeSend,this,[j,i.param,a,b])}:undefined,dataFilter:i.callbacks.ajax.dataFilter?function(a,b){return c.fire(i.callbacks.ajax.dataFilter,this,[j,i.param,a,b])||a}:undefined,success:e,error:f,complete:g},s=jQuery.extend(!0,{},i.ajax,t,s),m=this.model_.setGlobalXHR(jQuery.ajax(s)),this.model_.isDeferrable&&jQuery.when(m,h.wait_(n)).done(a).fail(b).always(d)}},b}(b.PageUtility);b.PageFetch=d}(b.APP||(b.APP={}));b.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){!function(b){var c=a.LIBRARY.Utility,d=function(b){function d(a,c,d,e,f,g,h,i,j,k,l){b.call(this),this.model_=a,this.app_=c,this.setting_=d,this.event_=e,this.register_=f,this.cache_=g,this.data_=h,this.textStatus_=i,this.jqXHR_=j,this.errorThrown_=k,this.host_=l,this.loadwaits_=[],this.main_()}return __extends(d,b),d.prototype.main_=function(){var a=this.app_,b=this.setting_,c=this.event_,d=(this.register_,this.cache_),b=this.setting_,c=this.event_,e=(this.register_,this.data_,this.textStatus_,this.jqXHR_),f=(b.callbacks.update,b.speedcheck),g=this.model_.speed;if(f&&g.time.push(g.now()-g.fire),f&&g.name.push("fetch("+g.time.slice(-1)+")"),b.loadtime=b.loadtime&&(new Date).getTime()-b.loadtime,b.loadtime=b.loadtime<100?0:b.loadtime,b.cache.mix&&"popstate"!==c.type.toLowerCase()&&(new Date).getTime()-c.timeStamp<=b.cache.mix)return this.model_.fallback(c,b);try{if(a.page.landing=null,!~(e.getResponseHeader("Content-Type")||"").toLowerCase().search(b.contentType))throw new Error("throw: content-type mismatch");if(this.srcDocument_=this.createHTMLDocument(e.responseText,b.destLocation.href),this.dstDocument_=document,b.area=this.chooseArea(b.area,this.srcDocument_,this.dstDocument_),!b.area)throw new Error("throw: area notfound");b.areas=b.area.match(/(?:[^,\(\[]+|\(.*?\)|\[.*?\])+/g),this.isCacheUsable_(b,c)&&(this.model_.setCache(b.destLocation.href,d&&d.data||null,this.textStatus_,this.jqXHR_),d=this.model_.getCache(b.destLocation.href),this.cache_=d),f&&g.time.push(g.now()-g.fire),f&&g.name.push("parse("+g.time.slice(-1)+")"),this.checkRedirect_(),this.dispatchEvent_(window,b.gns+":unload",!1,!0),this.updateUrl_(),this.model_.setGlobalSetting(jQuery.extend(!0,{},b,{origLocation:b.destLocation.cloneNode()})),this.updateDocument_()}catch(h){if(!h)return;this.cache_&&this.model_.removeCache(b.destLocation.href),this.model_.fallback(c,b)}},d.prototype.isCacheUsable_=function(a,b){switch(!0){case!a.cache.click&&!a.cache.submit&&!a.cache.popstate:case"submit"===b.type.toLowerCase()&&!a.cache[b.currentTarget.method.toLowerCase()]:return!1;default:return!0}},d.prototype.checkRedirect_=function(){var b=this,d=this.setting_,e=this.event_,f=this.register_,g=d.callbacks.update;if(jQuery('head meta[http-equiv="Refresh"][content*="URL="]',this.srcDocument_).length&&c.fire(g.redirect.before,null,[e,d.param,this.data_,this.textStatus_,this.jqXHR_])!==!1){var h=d.destLocation.cloneNode();switch(h.href=jQuery(h).attr("content").match(/\w+:\/\/[^;\s]+/i).shift(),!0){case!d.redirect:case h.protocol!==d.destLocation.protocol:case h.host!==d.destLocation.host:case"submit"===e.type.toLowerCase()&&"GET"!==e.currentTarget.method.toUpperCase():switch(e.type.toLowerCase()){case"click":case"submit":window.location.assign(h.href);break;case"popstate":window.location.replace(h.href)}throw!1;default:switch(jQuery[a.NAME].enable(),e.type.toLowerCase()){case"click":case"submit":setTimeout(function(){return jQuery[a.NAME].click(h.href)},0);break;case"popstate":window.history.replaceState(window.history.state,this.srcDocument_.title,h.href),f&&d.fix.location&&!c.compareUrl(d.destLocation.href,c.normalizeUrl(window.location.href))&&(jQuery[a.NAME].disable(),window.history.back(),window.history.forward(),jQuery[a.NAME].enable()),setTimeout(function(){return b.dispatchEvent_(window,"popstate",!1,!1)},0)}throw!1}c.fire(g.redirect.after,null,[e,d.param,this.data_,this.textStatus_,this.jqXHR_])===!1}},d.prototype.updateUrl_=function(){var b=this.setting_,e=this.event_,f=this.register_,g=b.callbacks.update;if(c.fire(g.url.before,null,[e,b.param,this.data_,this.textStatus_,this.jqXHR_])!==!1){if(f&&window.history.pushState(c.fire(b.state,null,[e,b.param,b.origLocation.href,b.destLocation.href]),~window.navigator.userAgent.toLowerCase().indexOf("opera")?this.dstDocument_.title:this.srcDocument_.title,b.destLocation.href),f&&b.fix.location&&!c.compareUrl(b.destLocation.href,c.normalizeUrl(window.location.href))&&(jQuery[a.NAME].disable(),window.history.back(),window.history.forward(),jQuery[a.NAME].enable()),!c.compareUrl(b.destLocation.href,c.normalizeUrl(window.location.href)))throw b.retriable?(b.retriable=!1,b.destLocation.href=c.normalizeUrl(window.location.href),new d(this.model_,this.app_,b,e,!1,b.cache[e.type.toLowerCase()]&&this.model_.getCache(b.destLocation.href),this.data_,this.textStatus_,this.jqXHR_,this.errorThrown_,this.host_),!1):new Error("throw: location mismatch");b.retriable=!0,c.fire(g.url.after,null,[e,b.param,this.data_,this.textStatus_,this.jqXHR_])===!1}},d.prototype.updateDocument_=function(){var a=this,b=this.setting_,d=this.event_;this.overwriteDocumentByCache_(),b.fix.noscript&&this.escapeNoscript_(this.srcDocument_),this.rewrite_(),this.title_(),this.head_();var e=b.speedcheck,f=this.model_.speed;e&&f.time.push(f.now()-f.fire),e&&f.name.push("head("+f.time.slice(-1)+")"),this.area_(),e&&f.time.push(f.now()-f.fire),e&&f.name.push("content("+f.time.slice(-1)+")"),this.balance_(),this.css_('link[rel~="stylesheet"], style'),jQuery(window).one(b.gns+":rendering",function(g){g.preventDefault(),g.stopImmediatePropagation();var h=function(e){return a.dispatchEvent_(document,b.gns+":ready",!1,!0),c.fire(b.callback,null,[d,b.param,a.data_,a.textStatus_,a.jqXHR_]),a.waitRender_(jQuery.when?jQuery.Deferred().resolve:e)},i=function(c){return setTimeout(function(){a.app_.page.isScrollPosSavable=!0,"popstate"!==d.type.toLowerCase()?a.scrollByHash_(b.destLocation.hash)||a.scroll_(!0):a.scroll_(!0)},100),a.dispatchEvent_(document,b.gns+":render",!1,!0),e&&f.time.push(f.now()-f.fire),e&&f.name.push("render("+f.time.slice(-1)+")"),jQuery.when?jQuery.when.apply(jQuery,a.loadwaits_):c()},j=function(){return a.dispatchEvent_(window,b.gns+":load",!1,!0),e&&f.time.push(f.now()-f.fire),e&&f.name.push("load("+f.time.slice(-1)+")"),e&&console.log(f.time),e&&console.log(f.name),a.script_("[src][defer]"),jQuery.when&&jQuery.Deferred()};a.scroll_(!1);var k=a.script_(":not([defer]), :not([src])");if(jQuery.when){var l=jQuery.Deferred().pipe?"pipe":"then";jQuery.when.apply(jQuery,k)[l](function(){return h()},function(){return h()})[l](function(){return i()},function(){return i()})[l](function(){return j()},function(){return j()})}else h(function(){return i(function(){return j()})})}).trigger(b.gns+":rendering")},d.prototype.overwriteDocumentByCache_=function(){var a=this.setting_,b=this.event_,c=this.cache_;if(this.isCacheUsable_(a,b)&&c&&c.data){var d=a.fix.noscript?this.restoreNoscript_(c.data):c.data,e=this.createHTMLDocument(d,a.destLocation.href),f=this.srcDocument_;f.title=e.title;for(var g,h,i=0;a.areas[i];i++){if(g=jQuery(a.areas[i],e).clone(),h=jQuery(a.areas[i],f),!g.length||!h.length||g.length!==h.length)throw new Error("throw: area mismatch");for(var j=0;g[j];j++)h[j].parentNode.replaceChild(g[j],h[j])}}},d.prototype.rewrite_=function(){var a=this.setting_,b=this.event_,d=a.callbacks.update;a.rewrite&&c.fire(d.rewrite.before,null,[b,a.param])!==!1&&(c.fire(a.rewrite,null,[this.srcDocument_,a.area,this.host_]),c.fire(d.rewrite.before,null,[b,a.param])===!1)},d.prototype.title_=function(){var a=this.setting_,b=this.event_,d=a.callbacks.update;c.fire(d.title.before,null,[b,a.param,this.data_,this.textStatus_,this.jqXHR_])!==!1&&(this.dstDocument_.title=this.srcDocument_.title,a.fix.history&&this.app_.data.saveTitle(),c.fire(d.title.after,null,[b,a.param,this.data_,this.textStatus_,this.jqXHR_])===!1)},d.prototype.head_=function(){var a=this.setting_,b=this.event_,d=this.srcDocument_,e=this.dstDocument_,f=a.callbacks.update;if(a.load.head&&c.fire(f.head.before,null,[b,a.param,this.data_,this.textStatus_,this.jqXHR_])!==!1){for(var g,h="base, meta, link",i=jQuery(d.head).children(h).filter(a.load.head).not(a.load.ignore).not('link[rel~="stylesheet"], style, script'),j=jQuery(e.head).children(h).filter(a.load.head).not(a.load.ignore).not('link[rel~="stylesheet"], style, script'),k=jQuery(),l=j,m=0;g=i[m];m++){for(var n=0;l[n];n++)if(l[n].tagName===g.tagName&&l[n].outerHTML===g.outerHTML){if(k.length){var o=j[j.index(l[n])-1];o?jQuery(o).after(k.clone()):l.eq(n).before(k.clone()),k=jQuery()}l=l.not(l[n]),g=null;break}k=k.add(g)}jQuery("title",e).before(k.clone()),l.remove(),c.fire(f.head.after,null,[b,a.param,this.data_,this.textStatus_,this.jqXHR_])===!1}},d.prototype.area_=function(){function a(){var a=jQuery.Deferred();return jQuery(this).one("load error",a.resolve),a}var b,d=this,e=this.setting_,f=this.event_,g=this.srcDocument_,h=this.dstDocument_,i=e.callbacks.update;if(c.fire(i.content.before,null,[f,e.param,this.data_,this.textStatus_,this.jqXHR_])!==!1){jQuery(e.area).children("."+e.nss.class4html+"-check").remove(),b=jQuery("<div/>",{"class":e.nss.class4html+"-check",style:"background: none !important; display: block !important; visibility: hidden !important; position: absolute !important; top: 0 !important; left: 0 !important; z-index: -9999 !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; font-size: 12px !important; text-indent: 0 !important;"}).text(e.gns);for(var j,k,l=0;e.areas[l];l++){if(j=jQuery(e.areas[l],g).clone(),k=jQuery(e.areas[l],h),!j.length||!k.length||j.length!==k.length)throw new Error("throw: area mismatch");j.find("script").each(function(a,b){return d.escapeScript_(b)}),jQuery.when&&(this.loadwaits_=this.loadwaits_.concat(j.find("img, iframe, frame").map(a).get()));for(var m=0;j[m];m++)k[m].parentNode.replaceChild(j[m],k[m]);k=jQuery(e.areas[l],h),k.append(b.clone()),k.find("script").each(function(a,b){return d.restoreScript_(b)})}this.dispatchEvent_(document,e.gns+":DOMContentLoaded",!1,!0),c.fire(i.content.after,null,[f,e.param,this.data_,this.textStatus_,this.jqXHR_])===!1}},d.prototype.balance_=function(){var a=this.setting_,b=this.event_,d=a.callbacks.update;if(a.balance.self&&a.loadtime&&c.fire(d.balance.before,null,[b,a.param])!==!1){var e=this.jqXHR_.getResponseHeader(a.balance.server.header)||"",f=Math.ceil(a.loadtime/(this.jqXHR_.responseText.length||1)*1e5);this.app_.data.saveServer(e,f),this.app_.data.saveExpires(a.destLocation.href,e,this.calExpires(this.jqXHR_)),this.app_.balance.chooseServer(a),this.app_.data.loadBuffers(a.buffer.limit),c.fire(d.balance.after,null,[b,a.param])===!1}},d.prototype.css_=function(a){function b(){return jQuery.contains(g.head,this)}function d(){return jQuery.contains(g.body,this)}var e=this.setting_,f=this.event_,g=this.srcDocument_,h=this.dstDocument_,i=e.callbacks.update;if(e.load.css&&c.fire(i.css.before,null,[f,e.param,this.data_,this.textStatus_,this.jqXHR_])!==!1){for(var j,k="link, style",l=jQuery(k,g).filter(a).not(e.load.ignore).not(jQuery("noscript",g).find(k)),m=jQuery(k,h).filter(a).not(e.load.ignore).not(jQuery("noscript",g).find(k)),n=jQuery(),o=m,p=0;j=l[p];p++){for(var q,r=0;o[r];r++){switch(j.tagName.toLowerCase()){case"link":q=j.href===o[r].href;break;case"style":q=j.innerHTML.trim()===o[r].innerHTML.trim()}if(q){if(n.length){if(jQuery.contains(h.body,o[r])&&n.first().parents("head").length)jQuery(h.head).append(n.filter(b).clone()),o.eq(r).before(n.filter(d).clone());else{var s=m[m.index(o[r])-1];s?jQuery(s).after(n.clone()):o.eq(r).before(n.clone())}n=jQuery()}o=o.not(o[r]),r-=Number(!!r),j=null;break}}n=n.add(j)}if(jQuery(h.head).append(n.filter(b).clone()),jQuery(h.body).append(n.filter(d).clone()),o.remove(),c.fire(i.css.after,null,[f,e.param,this.data_,this.textStatus_,this.jqXHR_])!==!1){var t=e.speedcheck,u=this.model_.speed;t&&u.time.push(u.now()-u.fire),t&&u.name.push("css("+u.time.slice(-1)+")")}}},d.prototype.script_=function(a){var b=this,d=this.setting_,e=this.event_,f=this.srcDocument_,g=this.dstDocument_,h=d.callbacks.update,i=[];if(!d.load.script)return i;if(c.fire(h.script.before,null,[e,d.param,this.data_,this.textStatus_,this.jqXHR_])===!1)return i;for(var j,k="script",l=jQuery(k,f).filter(a).not(d.load.ignore).not(jQuery("noscript",f).find(k)),m=jQuery(),n=this.app_.page.loadedScripts,o=/^$|(?:application|text)\/(?:java|ecma)script/i,p=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,q=0;j=l[q];q++)if(o.test(j.type||"")&&(j.hasAttribute("src")?!n[j.src]:j.innerHTML.trim())){var r=jQuery(j).parent(d.load.log)[0];if(r&&!jQuery(j).parents(d.area).length){var s=jQuery(r.id||r.tagName,g)[0],t=j.cloneNode(!0);this.escapeScript_(t),s.appendChild(t),this.restoreScript_(t)}if(this.model_.isDeferrable)!function(a,c){if(c.hasAttribute("src")){if(!c.getAttribute("src"))return;c.hasAttribute("async")?jQuery.ajax(jQuery.extend(!0,{},d.ajax,d.load.ajax,{url:c.src,async:!0,global:!1})).done(function(){return b.dispatchEvent_(c,"load",!1,!0)}).fail(function(){return b.dispatchEvent_(c,"error",!1,!0)}):(jQuery.ajax(jQuery.extend(!0,{},d.ajax,d.load.ajax,{url:c.src,dataType:"text",async:!0,global:!1})).done(function(){return a.resolve([c,arguments[0]])}).fail(function(){return a.resolve([c,new Error])}),i.push(a))}else a.resolve([c,(c.text||c.textContent||c.innerHTML||"").replace(p,"")]),i.push(a)}(jQuery.Deferred(),j);else if(j.hasAttribute("src")){if(!j.getAttribute("src"))continue;m=m.add(j)}else m=m.add(j)}try{if(this.model_.isDeferrable)jQuery.when.apply(jQuery,i).always(function(){for(var a=0,c=arguments.length;c>a;a++){var e=arguments[a],f=e[0],g=e[1];f.src&&(n[f.src]=!d.load.reload||!jQuery(f).is(d.load.reload)),"string"==typeof g?(eval.call(window,g),f.hasAttribute("src")&&b.dispatchEvent_(f,"load",!1,!0)):f.hasAttribute("src")&&b.dispatchEvent_(f,"error",!1,!0)}});else for(var j,q=0;j=m[q];q++)j.hasAttribute("src")?(j.src&&(n[j.src]=!d.load.reload||!jQuery(j).is(d.load.reload)),function(a){jQuery.ajax(jQuery.extend(!0,{},d.ajax,d.load.ajax,{url:a.src,async:a.hasAttribute("async"),global:!1},{success:function(){return b.dispatchEvent_(a,"load",!1,!0)},error:function(){return b.dispatchEvent_(a,"error",!1,!0)}}))}(j)):eval.call(window,(j.text||j.textContent||j.innerHTML||"").replace(p,""))}catch(u){throw setTimeout(function(){return b.model_.fallback(e,d)},50),u}if(c.fire(h.script.after,null,[e,d.param,this.data_,this.textStatus_,this.jqXHR_])===!1)return i;var v=d.speedcheck,w=this.model_.speed;return v&&w.time.push(w.now()-w.fire),v&&w.name.push("script("+w.time.slice(-1)+")"),i},d.prototype.scroll_=function(a){var b=this,d=this.setting_,e=this.event_,f=d.callbacks.update;if(c.fire(f.scroll.before,null,[e,d.param])!==!1){var g,h;switch(e.type.toLowerCase()){case"click":case"submit":g=a&&"function"==typeof d.scrollLeft?c.fire(d.scrollLeft,null,[e,d.param,d.origLocation.href,d.destLocation.href]):d.scrollLeft,g=g>=0?g:0,g=g===!1||null===g?jQuery(window).scrollLeft():parseInt(Number(g)+"",10),h=a&&"function"==typeof d.scrollTop?c.fire(d.scrollTop,null,[e,d.param,d.origLocation.href,d.destLocation.href]):d.scrollTop,h=h>=0?h:0,h=h===!1||null===h?jQuery(window).scrollTop():parseInt(Number(h)+"",10),window.scrollTo(g,h);break;case"popstate":a&&d.fix.scroll&&this.app_.data.loadScrollPosition()}a&&setTimeout(function(){return b.app_.page.isScrollPosSavable&&b.app_.data.saveScrollPosition()},300),c.fire(f.scroll.after,null,[e,d.param])===!1}},d.prototype.waitRender_=function(a){function b(){return this.clientWidth||this.clientHeight||jQuery(this).is(":hidden")}var d=this.setting_,e=(this.event_,d.callbacks.update,jQuery(d.area)),f=e.children("."+d.nss.class4html+"-check"),g=(new Date).getTime()+5e3,h=function(){switch(!0){case!c.compareUrl(d.destLocation.href,c.normalizeUrl(window.location.href)):break;case(new Date).getTime()>g:case f.length!==e.length:case f.length===f.filter(b).length:f.remove(),a();break;default:setTimeout(h,100)}};return h(),jQuery.when&&a},d.prototype.scrollByHash_=function(a){if(a="#"===a.charAt(0)?a.slice(1):a,!a)return!1;var b=jQuery("#"+(a?a:", [name~="+a+"]")).first();return b.length?(isFinite(b.offset().top)&&window.scrollTo(jQuery(window).scrollLeft(),parseInt(Number(b.offset().top)+"",10)),!0):!1},d.prototype.escapeNoscript_=function(a){function b(){jQuery(this).text(this.innerHTML)}jQuery("noscript",a).children().parent().each(b)},d.prototype.restoreNoscript_=function(a){var b=jQuery("<span/>");return a.replace(/(<noscript>)([^<>]+?)(<\/noscript>)/gim,function(a,c,d,e){return c+b.html(d).text()+e})},d.prototype.escapeScript_=function(a){jQuery.data(a,"source",a.src),jQuery.data(a,"code",a.innerHTML),a.removeAttribute("src"),a.innerHTML=""},d.prototype.restoreScript_=function(a){undefined!==jQuery.data(a,"code")&&(a.innerHTML=" ",jQuery.data(a,"source")?(a.src=jQuery.data(a,"source"),jQuery.removeData(a,"source")):a.removeAttribute("src"),a.innerHTML=jQuery.data(a,"code"),jQuery.removeData(a,"code"))},d}(b.PageUtility);b.PageUpdate=d}(b.APP||(b.APP={}));b.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){!function(b){var c=a.LIBRARY.Utility,d=function(a){function d(b,d){var e=this;a.call(this),this.model_=b,this.app_=d,this.landing=c.normalizeUrl(window.location.href),this.recent={order:[],data:{},size:0},this.loadedScripts={},this.isScrollPosSavable=!0,setTimeout(function(){return e.createHTMLDocument("","")||e.model_.disable()},50)}return __extends(d,a),d.prototype.transfer=function(a,b,c,d){var e=this,f=function(a,b,c,d,f,g,h,i,j){e.update(a,b,c,d,f,g,h,i,j)},g=function(a,b,c,d,f,g,h,i,j){a.fallback&&"abort"!==g&&(a.balance.self&&(e.app_.data.saveServer(j,0,(new Date).getTime()),e.app_.balance.chooseServer(a)),e.model_.fallback(b,a))};this.fetch(a,b,c,d,f,g)},d.prototype.fetch=function(a,c,d,e,f,g){new b.PageFetch(this.model_,this.app_,a,c,d,e,f,g)},d.prototype.update=function(a,c,d,e,f,g,h,i,j){new b.PageUpdate(this.model_,this.app_,a,c,d,e,f,g,h,i,j)},d}(b.PageUtility);b.Page=d}(b.APP||(b.APP={}));b.APP}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(MODULE){!function(MODEL){!function(APP){var Util=MODULE.LIBRARY.Utility,Main=function(){function Main(a,b){this.model_=a,this.controller_=b,this.balance=new APP.Balance(this.model_,this),this.page=new APP.Page(this.model_,this),this.data=new APP.Data(this.model_,this)}return Main.prototype.initialize=function(a,b){var c=this,d=this.page.loadedScripts;b.load.script&&jQuery("script").each(function(){var a=this;a.src&&(d[a.src]=!b.load.reload||!jQuery(a).is(b.load.reload))}),new MODULE.View(this.model_,this.controller_,a,b),setTimeout(function(){return c.data.loadBuffers(b.buffer.limit)},b.buffer.delay),setTimeout(function(){return c.balance.enable(b)},b.buffer.delay),setTimeout(function(){return c.page.landing=null},1500)},Main.prototype.configure=function(option,origURL,destURL){function scope(a,b,c,d){"undefined"==typeof d&&(d="");var e,f,g,h,i,j,k,l,m,n,o,p=a.scope;if(e=that.model_.convertUrlToKeyUrl(b).match(/.+?\w(\/.*)/).pop(),f=that.model_.convertUrlToKeyUrl(c).match(/.+?\w(\/.*)/).pop(),d=d.replace(/[#?].*/,""),h=(d||f).replace(/^\/|\/$/g,"").split("/"),d){if(!~d.indexOf("*"))return undefined;g=[];for(var q=e.replace(/^\/|\/$/g,"").split("/"),r=0,s=h.length;s>r;r++)"*"===h[r]&&g.push(q[r])}for(var r=h.length+1;r--;)if(l=o=m=n=undefined,i=h.slice(0,r).join("/"),i="/"+i+("/"===(d||e).charAt(i.length+1)?"/":""),i&&i in p){if(p[i]instanceof Array?(j="",k=p[i]):(j=p[i],k=p[j]),!k||!k.length)return!1;k=k.concat();for(var t,u=0;(t=k[u])&&(m!==!1&&n!==!1);u++)if("#"===t[0]&&(j=t.slice(1),[].splice.apply(k,[u,1].concat(p[j])),t=k[u]),"inherit"===t)l=!0;else if("rewrite"!==t||"function"!=typeof p.rewrite||d){if("string"==typeof t){var v="!"===t[0];t=v?t.slice(1):t;var w="*"===t[0];if(t=w?t.slice(1):t,d&&~t.indexOf("/*/"))for(var x=0,s=g.length;s>x;x++)t=t.replace("/*/","/"+g[x]+"/");if(w?!e.search(t):!e.indexOf(t)){if(v)return!1;m=!0}if(w?!f.search(t):!f.indexOf(t)){if(v)return!1;n=!0,o=p["$"+j]||p["$"+t]||null}}}else{var y=scope.apply(this,[].slice.call(arguments).slice(0,3).concat([Util.fire(p.rewrite,null,[f])]));if(y){m=n=!0,o=y;break}if(!1===y)return!1}if(m&&n)return jQuery.extend(!0,{},a,o);if(!l)break}}var that=this;origURL=Util.normalizeUrl(origURL||option.origLocation.href),destURL=Util.normalizeUrl(destURL||option.destLocation.href),option=jQuery.extend(!0,{},option.option||option),option=option.scope?jQuery.extend(!0,{},option,scope(option,origURL,destURL)||{cancel:!0}):jQuery.extend(!0,{},option),MODULE.FREEZE(option,!0);var initial={area:"body",link:"a:not([target])",filter:function(){return/^https?:/.test(this.href)&&/\/[^.]*$|\.(html?|php)$/.test(this.pathname.replace(/^\/?/,"/"))},form:null,scope:null,rewrite:null,state:null,scrollTop:0,scrollLeft:0,ajax:{dataType:"text"},contentType:"text/html",cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,mix:0,limit:100,size:1048576,expires:{max:null,min:3e5}},buffer:{limit:30,delay:500},load:{head:"",css:!1,script:!1,execute:!0,log:"head, body",reload:"",ignore:'[src*="jquery.js"], [src*="jquery.min.js"], [href^="chrome-extension://"]',ajax:{dataType:"script",cache:!0}},balance:{self:!1,weight:3,option:{server:{header:!1},ajax:{crossDomain:!0},callbacks:{ajax:{beforeSend:null}}},client:{support:{userAgent:/msie|trident.+ rv:|chrome|firefox|safari/i,redirect:/chrome|firefox|safari/i},exclude:/mobile|phone|android|iphone|blackberry/i,cookie:{balance:"ajax_balanceable",redirect:"ajax_redirectable",host:"ajax_host"}},server:{header:"X-Ajax-Host",filter:null,respite:6e5},history:{expires:864e6,limit:30}},callback:null,callbacks:{ajax:{},update:{redirect:{},rewrite:{},url:{},title:{},head:{},content:{},scroll:{},css:{},script:{},balance:{}}},param:null,redirect:!0,wait:0,scroll:{delay:300},fix:{location:!0,history:!0,scroll:!0,noscript:!0,reset:!1},fallback:!0,database:!0,server:{query:null,header:!0}},force={ns:undefined,nss:undefined,speedcheck:undefined,cancel:undefined,origLocation:undefined,destLocation:undefined,gns:MODULE.NAME,areas:[],scroll:{queue:[]},loadtime:null,retriable:!0,option:option},compute=function(){setting.ns=setting.ns&&setting.ns.split(".").sort().join(".")||"";var nsArray=[setting.gns||MODULE.NAME].concat(setting.ns&&String(setting.ns).split(".")||[]),query=setting.server.query;switch(query&&typeof query){case"string":query=eval("({"+query.match(/[^?=&]+=[^&]*/g).join("&").replace(/"/g,'\\"').replace(/([^?=&]+)=([^&]*)/g,'"$1": "$2"').replace(/&/g,",")+"})");case"object":query=jQuery.param(query);break;default:query=""}return{gns:undefined,ns:undefined,areas:undefined,scroll:undefined,loadtime:undefined,retriable:undefined,option:undefined,speedcheck:undefined,cancel:undefined,nss:{name:setting.ns||"",array:nsArray,event:nsArray.join("."),data:nsArray.join("-"),class4html:nsArray.join("-"),click:["click"].concat(nsArray.join(":")).join("."),submit:["submit"].concat(nsArray.join(":")).join("."),popstate:["popstate"].concat(nsArray.join(":")).join("."),scroll:["scroll"].concat(nsArray.join(":")).join("."),requestHeader:["X",nsArray[0].replace(/^\w/,function(a){return a.toUpperCase()})].join("-")},origLocation:function(a,b){return b.href=a,b}(origURL,document.createElement("a")),destLocation:function(a,b){return b.href=a,b}(destURL,document.createElement("a")),fix:/android|iphone os|like mac os x/i.test(window.navigator.userAgent)?undefined:{location:!1,reset:!1},contentType:setting.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),server:{query:query},timeStamp:(new Date).getTime()}},setting;return setting=jQuery.extend(!0,initial,option),setting=jQuery.extend(!0,setting,setting.balance.self&&setting.balance.option,force),setting=jQuery.extend(!0,setting,compute()),MODULE.SEAL(setting,!0)},Main}();APP.Main=Main}(MODEL.APP||(MODEL.APP={}));var APP=MODEL.APP}(MODULE.MODEL||(MODULE.MODEL={}));var MODEL=MODULE.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(a){a.App=a.APP.Main}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){!function(b){var c=a.LIBRARY.Utility,d=function(d){function e(){d.call(this,-1),this.controller_=new a.Controller(this),this.app_=new b.App(this,this.controller_),this.isDeferrable=!!jQuery.when&&1.06<=Number(jQuery().jquery.replace(/\D*(\d+)\.(\d+).*$/,"$1.0$2").replace(/\d+(\d{2})$/,"$1")),this.queue=[]}return __extends(e,d),e.prototype.host=function(){return this.app_.balance.host()},e.prototype.state=function(){return this.state_},e.prototype.main_=function(b,c){var d=this;switch(typeof c){case"object":b=b instanceof a.NAMESPACE?b:jQuery(document)[a.NAME](),a.FREEZE(c,!0);break;default:return b}if(!window.history||!window.history.pushState||!window.history.replaceState)return b;var e=this.app_.configure(c,window.location.href,window.location.href);return this.setGlobalSetting(e),this.app_.data.opendb(e),this.speed={fire:0,time:[],name:[],now:function(){return(new Date).getTime()}},jQuery(function(){d.app_.initialize(b,e),d.state_=-1===d.state()?0:d.state()}),b},e.prototype.convertUrlToKeyUrl=function(a){return a.replace(/#.*/,"")},e.prototype.isImmediateLoadable=function(a,b){if(0===this.state()){var d,e,f=c.normalizeUrl(window.location.href);switch(typeof a){case"string":e=null,d=c.normalizeUrl(a);break;case"object":switch(e=a,e.type.toLowerCase()){case"click":if(d=c.normalizeUrl(e.currentTarget.href),!jQuery(e.currentTarget).filter(b.filter).length)return!1;break;case"submit":d=c.normalizeUrl(e.currentTarget.action);break;case"popstate":return!0}if(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return!1}var g=jQuery("<a/>",{href:f})[0],h=jQuery("<a/>",{href:d})[0];if(g.protocol!==h.protocol||g.host!==h.host)return!1;if(b=b||this.app_.configure(this.getGlobalSetting(),g.href,h.href),!b.cancel)return h.hash&&g.href.replace(/#.*/,"")===h.href.replace(/#.*/,"")?!1:this.app_.page.chooseArea(b.area,document,document)?!0:!1}},e.prototype.getGlobalSetting=function(){return this.app_.page.globalSetting},e.prototype.setGlobalSetting=function(a){return this.app_.page.globalSetting=a},e.prototype.getGlobalXHR=function(){return this.app_.page.globalXHR},e.prototype.setGlobalXHR=function(a){return this.app_.page.globalXHR&&this.app_.page.globalXHR.readyState<4&&this.app_.page.globalXHR.abort(),this.app_.page.globalXHR=a},e.prototype.click=function(a){a.timeStamp=(new Date).getTime();var b=a.currentTarget,c=(jQuery(b),this.app_.configure(this.getGlobalSetting(),window.location.href,b.href));if(!(0!==this.state()||c.cancel||a.isDefaultPrevented()||!this.isImmediateLoadable(a,c)||c.cache.mix&&this.getCache(c.destLocation.href))){this.app_.data.saveTitle(),this.app_.page.isScrollPosSavable&&this.app_.data.saveScrollPosition();var d;return c.cache[a.type.toLowerCase()]&&(d=this.getCache(c.destLocation.href)),this.app_.page.transfer(c,a,c.destLocation.href!==c.origLocation.href,d),void a.preventDefault()}!a.originalEvent&&!a.isDefaultPrevented()&&!jQuery(document).has(b).length&&this.fallback(a,c)},e.prototype.submit=function(a){a.timeStamp=(new Date).getTime();var b=a.currentTarget,d=(jQuery(b),this.app_.configure(this.getGlobalSetting(),window.location.href,b.action));if(0===this.state()&&!d.cancel&&!a.isDefaultPrevented()&&this.isImmediateLoadable(a,d)){var e=d.destLocation.href.replace(/[?#].*/,"")+("GET"===b.method.toUpperCase()?"?"+jQuery(b).serialize():"");if(d.destLocation.href=c.normalizeUrl(e),!d.cache.mix||!this.getCache(d.destLocation.href)){this.app_.data.saveTitle(),this.app_.page.isScrollPosSavable&&this.app_.data.saveScrollPosition();var f;return d.cache[a.type.toLowerCase()]&&d.cache[b.method.toLowerCase()]&&(f=this.getCache(d.destLocation.href)),this.app_.page.transfer(d,a,d.destLocation.href!==d.origLocation.href,f),void a.preventDefault()}}!a.originalEvent&&!a.isDefaultPrevented()&&!jQuery(document).has(b).length&&this.fallback(a,d)},e.prototype.popstate=function(a){a.timeStamp=(new Date).getTime();var b=this.app_.configure(this.getGlobalSetting(),null,window.location.href);
if(!(this.app_.page.landing&&this.app_.page.landing===c.normalizeUrl(window.location.href)||b.origLocation.href===b.destLocation.href||0!==this.state()||b.cancel||!this.isImmediateLoadable(a,b)||b.origLocation.hash!==b.destLocation.hash&&b.origLocation.pathname+b.origLocation.search===b.destLocation.pathname+b.destLocation.search)){this.app_.data.saveTitle(b.origLocation.href,document.title),b.fix.history&&this.app_.data.loadTitle();var d;return b.cache[a.type.toLowerCase()]&&(d=this.getCache(b.destLocation.href)),void this.app_.page.transfer(b,a,!1,d)}},e.prototype.scroll=function(a){var b=this,c=this.getGlobalSetting();if(0===this.state()&&!a.isDefaultPrevented())if(c.scroll.delay){for(var d;d=this.queue.shift();)clearTimeout(d);d=setTimeout(function(){for(;d=b.queue.shift();)clearTimeout(d);b.app_.page.isScrollPosSavable&&b.app_.data.saveScrollPosition()},c.scroll.delay),this.queue.push(d)}else this.app_.page.isScrollPosSavable&&this.app_.data.saveScrollPosition()},e.prototype.fallback=function(a,b){switch(!0){case!b.fallback:case!1===c.fire(b.fallback,null,[a,b.param,b.origLocation.href,b.destLocation.href]):break;default:this.app_.page.movePageNormally(a)}},e.prototype.enable=function(){this.state_=0},e.prototype.disable=function(){this.state_=1},e.prototype.getCache=function(a){var b=this.getGlobalSetting(),d=this.app_.page.recent;if(!b||!d)return null;var e=this.convertUrlToKeyUrl(c.normalizeUrl(a));return a=null,d.data[e]&&(new Date).getTime()>d.data[e].expires&&this.removeCache(e),d.data[e]&&!d.data[e].data&&!d.data[e].jqXHR&&this.removeCache(e),d.data[e]},e.prototype.setCache=function(a,b,d,e,f){var g=this,h=this.getGlobalSetting(),i=this.app_.page.recent;if(!h||!i)return this;var j,k,l,m,n=this.convertUrlToKeyUrl(c.normalizeUrl(a));a=null,i.order.unshift(n);for(var o,p=1;o=i.order[p];p++)n===o&&i.order.splice(p,1);if((h.cache.limit&&i.order.length>h.cache.limit||h.cache.size&&i.size>h.cache.size)&&this.cleanCache(),j=this.getCache(n),b||e||j&&(j.data||j.jqXHR)){var q=(e||{}).responseText||"";if(k=parseInt(1.8*q.length+""||"1048576",10),l=(new Date).getTime(),m=function(a){{var b;h.cache.expires}return h.cache.expires?i.data[n]&&!e?i.data[n].expires:(b=e&&g.app_.page.calAge(e)||Number(h.cache.expires),b=Math.max(b,0)||0,b="object"==typeof h.cache.expires&&"number"==typeof h.cache.expires.min?Math.max(h.cache.expires.min,b):b,b="object"==typeof h.cache.expires&&"number"==typeof h.cache.expires.max?Math.min(h.cache.expires.max,b):b,a+b):0}(l),i.size=i.size||0,i.size+=i.data[n]?0:k,i.data[n]=jQuery.extend(!0,{},j,{jqXHR:e,textStatus:d,data:b,size:k,expires:m,host:f||"",timeStamp:l}),i.data[n].data||i.data[n].jqXHR||this.removeCache(n),e||j&&j.jqXHR){var r=((e||j&&j.jqXHR).responseText||"").slice(0,1e4).match(/<title[^>]*>(.*?)<\/title>/i).pop()||"";h.fix.history&&this.app_.data.saveTitle(n,r)}}},e.prototype.removeCache=function(a){var b=this.getGlobalSetting(),d=this.app_.page.recent;if(b&&d)switch(typeof a){case"string":var e=this.convertUrlToKeyUrl(c.normalizeUrl(a));a=null;for(var f,g=0;f=d.order[g];g++)if(e===f){this.removeCache(g);break}break;case"number":var g=a,f=d.order[g];d.order.splice(g,1),d.size-=d.data[f].size,d.data[f]=null,delete d.data[f]}},e.prototype.clearCache=function(){var a=this.getGlobalSetting(),b=this.app_.page.recent;if(a&&b)for(;b.order.length;)this.removeCache(~-b.order.length)},e.prototype.cleanCache=function(){var a=this.getGlobalSetting(),b=this.app_.page.recent;if(a&&b){for(var c,d=b.order.length,e=(new Date).getTime();c=b.order[--d];)e>b.data[c].expires&&this.removeCache(c);for(;a.cache.limit&&b.order.length>a.cache.limit||a.cache.size&&b.size>a.cache.size;)this.removeCache(~-b.order.length)}},e.prototype.getRequestDomain=function(){return this.host()},e.prototype.setRequestDomain=function(a){return this.app_.balance.changeServer(a.split("//").pop(),null)},e}(b.Template);b.Main=d}(a.MODEL||(a.MODEL={}));a.MODEL}(MODULE||(MODULE={}));var MODULE;!function(a){a.Model=a.MODEL.Main}(MODULE||(MODULE={}));var Module=function(){function a(){new MODULE.Model}return a}();new Module}(window,window.document,void 0,jQuery);